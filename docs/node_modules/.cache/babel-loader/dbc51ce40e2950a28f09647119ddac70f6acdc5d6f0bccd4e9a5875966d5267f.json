{"ast":null,"code":"var _jsxFileName = \"D:\\\\Uni\\\\ba\\\\BA_webboard\\\\cafe\\\\src\\\\component\\\\ProfilePage.js\",\n  _s = $RefreshSig$();\n// ProfilePage.jsx\nimport React, { useState, useEffect } from 'react';\nimport supabase from './connect';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\nimport '../style/ProfilePage.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ProfilePage = ({\n  userData\n}) => {\n  _s();\n  const navigate = useNavigate();\n  const userId = userData.user_id;\n  const username = userData.username;\n  const email = userData.email;\n  const [loading, setLoading] = useState(false);\n  const [posts, setPosts] = useState([]);\n  useEffect(() => {\n    // Check for authenticated user\n    const fetchUserData = async () => {\n      try {\n        setLoading(true);\n        if (!userId) {\n          console.error('No user ID available');\n          setLoading(false);\n          return;\n        }\n\n        // Get user profile data\n        const {\n          data: data,\n          error: userError\n        } = await supabase.from('users').select('*').eq('user_id', userId).single();\n        if (userError && userError.code !== 'PGRST116') {\n          throw userError;\n        }\n\n        // Get user's posts\n        const {\n          data: postsData,\n          error: postsError\n        } = await supabase.from('posts').select('*').eq('user_id', userId).order('post_id', {\n          ascending: false\n        });\n        if (postsError) throw postsError;\n        setPosts(postsData || []);\n      } catch (error) {\n        console.error('Error fetching profile data:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchUserData();\n  }, [userId, email]);\n  const handleCreatePost = () => {\n    // Navigate to create post page\n    window.location.href = '/create-post';\n  };\n  const handleLogout = async () => {\n    try {\n      await supabase.auth.signOut();\n      window.location.href = '/login';\n    } catch (error) {\n      console.error('Error signing out:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-page\",\n    children: /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"profile-content\",\n      children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading\",\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-profile\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"avatar-container\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"avatar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"profile-username\",\n            children: username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"posts-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"section-title\",\n            children: \"Your Posts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 15\n          }, this), posts.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"no-posts-message\",\n            children: \"You haven't posted yet!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"posts-grid\",\n            children: posts.map(post => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"post-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"post-image\",\n                children: post.post_image && /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: post.post_image,\n                  alt: post.post_title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"post-title\",\n                children: post.post_title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"post-region\",\n                children: post.post_region\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"post-stats\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"post-likes\",\n                  children: [\"\\uD83D\\uDC4D \", post.post_like || 0]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 111,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"post-dislikes\",\n                  children: [\"\\uD83D\\uDC4E \", post.post_dislike || 0]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 23\n              }, this)]\n            }, post.post_id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n};\n_s(ProfilePage, \"11ny0tDc+k9N25HJFyt1PI+vizQ=\", false, function () {\n  return [useNavigate];\n});\n_c = ProfilePage;\nexport default ProfilePage;\nvar _c;\n$RefreshReg$(_c, \"ProfilePage\");","map":{"version":3,"names":["React","useState","useEffect","supabase","Link","useNavigate","useLocation","jsxDEV","_jsxDEV","Fragment","_Fragment","ProfilePage","userData","_s","navigate","userId","user_id","username","email","loading","setLoading","posts","setPosts","fetchUserData","console","error","data","userError","from","select","eq","single","code","postsData","postsError","order","ascending","handleCreatePost","window","location","href","handleLogout","auth","signOut","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","post","post_image","src","alt","post_title","post_region","post_like","post_dislike","post_id","_c","$RefreshReg$"],"sources":["D:/Uni/ba/BA_webboard/cafe/src/component/ProfilePage.js"],"sourcesContent":["// ProfilePage.jsx\r\nimport React, { useState, useEffect } from 'react';\r\nimport supabase from './connect';\r\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\r\nimport '../style/ProfilePage.css';\r\n\r\nconst ProfilePage = ({ userData }) => {\r\n  const navigate = useNavigate();\r\n\r\n  const userId = userData.user_id;\r\n  const username = userData.username;\r\n  const email = userData.email;\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  \r\n  const [posts, setPosts] = useState([]);\r\n  \r\n  useEffect(() => {\r\n    // Check for authenticated user\r\n    const fetchUserData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        if (!userId) {\r\n          console.error('No user ID available');\r\n          setLoading(false);\r\n          return;\r\n        }\r\n        \r\n        // Get user profile data\r\n        const { data: data, error: userError } = await supabase\r\n          .from('users')\r\n          .select('*')\r\n          .eq('user_id', userId)\r\n          .single();\r\n          \r\n        if (userError && userError.code !== 'PGRST116') {\r\n          throw userError;\r\n        }\r\n        \r\n        // Get user's posts\r\n        const { data: postsData, error: postsError } = await supabase\r\n          .from('posts')\r\n          .select('*')\r\n          .eq('user_id', userId)\r\n          .order('post_id', { ascending: false });\r\n          \r\n        if (postsError) throw postsError;\r\n        \r\n        setPosts(postsData || []);\r\n      } catch (error) {\r\n        console.error('Error fetching profile data:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    \r\n    fetchUserData();\r\n  }, [userId, email]);\r\n  \r\n  const handleCreatePost = () => {\r\n    // Navigate to create post page\r\n    window.location.href = '/create-post';\r\n  };\r\n  \r\n  const handleLogout = async () => {\r\n    try {\r\n      await supabase.auth.signOut();\r\n      window.location.href = '/login';\r\n    } catch (error) {\r\n      console.error('Error signing out:', error);\r\n    }\r\n  };\r\n  \r\n  \r\n  return (\r\n    <div className=\"profile-page\">\r\n      {/* Navigation */}\r\n      \r\n      {/* Main Content */}\r\n      <main className=\"profile-content\">\r\n        {loading ? (\r\n          <div className=\"loading\">Loading...</div>\r\n        ) : (\r\n          <>\r\n            <div className=\"user-profile\">\r\n              <div className=\"avatar-container\">\r\n                <div className=\"avatar\"></div>\r\n              </div>\r\n              <h2 className=\"profile-username\">{username}</h2>\r\n            </div>\r\n            \r\n            <div className=\"posts-section\">\r\n              <h3 className=\"section-title\">Your Posts</h3>\r\n              \r\n              {posts.length === 0 ? (\r\n                <p className=\"no-posts-message\">You haven't posted yet!</p>\r\n              ) : (\r\n                <div className=\"posts-grid\">\r\n                  {posts.map(post => (\r\n                    <div key={post.post_id} className=\"post-card\">\r\n                      <div className=\"post-image\">\r\n                        {post.post_image && (\r\n                          <img src={post.post_image} alt={post.post_title} />\r\n                        )}\r\n                      </div>\r\n                      <h4 className=\"post-title\">{post.post_title}</h4>\r\n                      <p className=\"post-region\">{post.post_region}</p>\r\n                      <div className=\"post-stats\">\r\n                        <span className=\"post-likes\">👍 {post.post_like || 0}</span>\r\n                        <span className=\"post-dislikes\">👎 {post.post_dislike || 0}</span>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </>\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfilePage;"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,QAAQ,MAAM,WAAW;AAChC,SAASC,IAAI,EAAEC,WAAW,EAAEC,WAAW,QAAQ,kBAAkB;AACjE,OAAO,0BAA0B;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAElC,MAAMC,WAAW,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EACpC,MAAMC,QAAQ,GAAGT,WAAW,CAAC,CAAC;EAE9B,MAAMU,MAAM,GAAGH,QAAQ,CAACI,OAAO;EAC/B,MAAMC,QAAQ,GAAGL,QAAQ,CAACK,QAAQ;EAClC,MAAMC,KAAK,GAAGN,QAAQ,CAACM,KAAK;EAE5B,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGnB,QAAQ,CAAC,KAAK,CAAC;EAG7C,MAAM,CAACoB,KAAK,EAAEC,QAAQ,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EAEtCC,SAAS,CAAC,MAAM;IACd;IACA,MAAMqB,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChC,IAAI;QACFH,UAAU,CAAC,IAAI,CAAC;QAEhB,IAAI,CAACL,MAAM,EAAE;UACXS,OAAO,CAACC,KAAK,CAAC,sBAAsB,CAAC;UACrCL,UAAU,CAAC,KAAK,CAAC;UACjB;QACF;;QAEA;QACA,MAAM;UAAEM,IAAI,EAAEA,IAAI;UAAED,KAAK,EAAEE;QAAU,CAAC,GAAG,MAAMxB,QAAQ,CACpDyB,IAAI,CAAC,OAAO,CAAC,CACbC,MAAM,CAAC,GAAG,CAAC,CACXC,EAAE,CAAC,SAAS,EAAEf,MAAM,CAAC,CACrBgB,MAAM,CAAC,CAAC;QAEX,IAAIJ,SAAS,IAAIA,SAAS,CAACK,IAAI,KAAK,UAAU,EAAE;UAC9C,MAAML,SAAS;QACjB;;QAEA;QACA,MAAM;UAAED,IAAI,EAAEO,SAAS;UAAER,KAAK,EAAES;QAAW,CAAC,GAAG,MAAM/B,QAAQ,CAC1DyB,IAAI,CAAC,OAAO,CAAC,CACbC,MAAM,CAAC,GAAG,CAAC,CACXC,EAAE,CAAC,SAAS,EAAEf,MAAM,CAAC,CACrBoB,KAAK,CAAC,SAAS,EAAE;UAAEC,SAAS,EAAE;QAAM,CAAC,CAAC;QAEzC,IAAIF,UAAU,EAAE,MAAMA,UAAU;QAEhCZ,QAAQ,CAACW,SAAS,IAAI,EAAE,CAAC;MAC3B,CAAC,CAAC,OAAOR,KAAK,EAAE;QACdD,OAAO,CAACC,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACtD,CAAC,SAAS;QACRL,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IAEDG,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,CAACR,MAAM,EAAEG,KAAK,CAAC,CAAC;EAEnB,MAAMmB,gBAAgB,GAAGA,CAAA,KAAM;IAC7B;IACAC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,cAAc;EACvC,CAAC;EAED,MAAMC,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI;MACF,MAAMtC,QAAQ,CAACuC,IAAI,CAACC,OAAO,CAAC,CAAC;MAC7BL,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;IACjC,CAAC,CAAC,OAAOf,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;IAC5C;EACF,CAAC;EAGD,oBACEjB,OAAA;IAAKoC,SAAS,EAAC,cAAc;IAAAC,QAAA,eAI3BrC,OAAA;MAAMoC,SAAS,EAAC,iBAAiB;MAAAC,QAAA,EAC9B1B,OAAO,gBACNX,OAAA;QAAKoC,SAAS,EAAC,SAAS;QAAAC,QAAA,EAAC;MAAU;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,gBAEzCzC,OAAA,CAAAE,SAAA;QAAAmC,QAAA,gBACErC,OAAA;UAAKoC,SAAS,EAAC,cAAc;UAAAC,QAAA,gBAC3BrC,OAAA;YAAKoC,SAAS,EAAC,kBAAkB;YAAAC,QAAA,eAC/BrC,OAAA;cAAKoC,SAAS,EAAC;YAAQ;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3B,CAAC,eACNzC,OAAA;YAAIoC,SAAS,EAAC,kBAAkB;YAAAC,QAAA,EAAE5B;UAAQ;YAAA6B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC7C,CAAC,eAENzC,OAAA;UAAKoC,SAAS,EAAC,eAAe;UAAAC,QAAA,gBAC5BrC,OAAA;YAAIoC,SAAS,EAAC,eAAe;YAAAC,QAAA,EAAC;UAAU;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,EAE5C5B,KAAK,CAAC6B,MAAM,KAAK,CAAC,gBACjB1C,OAAA;YAAGoC,SAAS,EAAC,kBAAkB;YAAAC,QAAA,EAAC;UAAuB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,gBAE3DzC,OAAA;YAAKoC,SAAS,EAAC,YAAY;YAAAC,QAAA,EACxBxB,KAAK,CAAC8B,GAAG,CAACC,IAAI,iBACb5C,OAAA;cAAwBoC,SAAS,EAAC,WAAW;cAAAC,QAAA,gBAC3CrC,OAAA;gBAAKoC,SAAS,EAAC,YAAY;gBAAAC,QAAA,EACxBO,IAAI,CAACC,UAAU,iBACd7C,OAAA;kBAAK8C,GAAG,EAAEF,IAAI,CAACC,UAAW;kBAACE,GAAG,EAAEH,IAAI,CAACI;gBAAW;kBAAAV,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cACnD;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE,CAAC,eACNzC,OAAA;gBAAIoC,SAAS,EAAC,YAAY;gBAAAC,QAAA,EAAEO,IAAI,CAACI;cAAU;gBAAAV,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eACjDzC,OAAA;gBAAGoC,SAAS,EAAC,aAAa;gBAAAC,QAAA,EAAEO,IAAI,CAACK;cAAW;gBAAAX,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACjDzC,OAAA;gBAAKoC,SAAS,EAAC,YAAY;gBAAAC,QAAA,gBACzBrC,OAAA;kBAAMoC,SAAS,EAAC,YAAY;kBAAAC,QAAA,GAAC,eAAG,EAACO,IAAI,CAACM,SAAS,IAAI,CAAC;gBAAA;kBAAAZ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAC5DzC,OAAA;kBAAMoC,SAAS,EAAC,eAAe;kBAAAC,QAAA,GAAC,eAAG,EAACO,IAAI,CAACO,YAAY,IAAI,CAAC;gBAAA;kBAAAb,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC/D,CAAC;YAAA,GAXEG,IAAI,CAACQ,OAAO;cAAAd,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAYjB,CACN;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC;MAAA,eACN;IACH;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACG;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACJ,CAAC;AAEV,CAAC;AAACpC,EAAA,CArHIF,WAAW;EAAA,QACEN,WAAW;AAAA;AAAAwD,EAAA,GADxBlD,WAAW;AAuHjB,eAAeA,WAAW;AAAC,IAAAkD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}